(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{207:function(e,t,n){e.exports=n.p+"static/media/landing-background.0fb4ced4.jpg"},212:function(e,t,n){e.exports=n(400)},399:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),i=n.n(c),o=n(94),u=n(26),l=n.n(u),s=n(33),f=n(52),d=n(107),m=n(63),p=n(404),v=(n(218),n(24)),h=n(146),g=n(81),b=n(25),E=n(148),w=n(149),x=n(192),O=n.n(x),j=(n(229),function(e){var t=e.center,n=e.coords;return r.a.createElement("div",{style:{height:"500px"}},r.a.createElement(E.a,{center:[t.lat,t.lon],zoom:12},r.a.createElement(O.a,{fitBoundsOnLoad:!0,fitBoundsOnUpdate:!0,points:n,latitudeExtractor:function(e){return e.lat},longitudeExtractor:function(e){return e.lon},intensityExtractor:function(e){return 3}}),r.a.createElement(w.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})))}),y=function(e){var t=e.activities,n=[];return t.forEach(function(e){n=n.concat(e.coords)}),r.a.createElement(j,{center:n[0],coords:n})},D=n(401),k=function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())},S=function(e){return parseFloat(e.toFixed(2))},L=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return[t,n>9?n:t?"0"+n:n||"0",a>9?a:"0"+a].filter(function(e){return e}).join(":")};function U(){var e=Object(v.a)(["\n  background-color: #ffffff;\n"]);return U=function(){return e},e}function A(){var e=Object(v.a)(["\n  color: #1890ff;\n  transition: 0.3s;\n  &:hover {\n    color: #40a9ff;\n    cursor: pointer;\n  }\n"]);return A=function(){return e},e}var F=b.a.div(A()),I=Object(b.a)(D.a)(U()),M=function(e){var t=e.activities,n=e.handleDelete,a=[{title:"Name",dataIndex:"name"},{title:"Date",dataIndex:"date",defaultSortOrder:"ascend",sorter:function(e,t){return new Date(t.date)-new Date(e.date)}},{title:"Time",dataIndex:"time"},{title:"Distance",dataIndex:"distance"},{title:"Pace",dataIndex:"pace"},{title:"Action",render:function(e){return r.a.createElement(F,{onClick:function(){return n(e.id)}},"Delete")}}],c=t.map(function(e,t){return{key:t,id:e.id,name:e.name,date:k(new Date(e.date)),time:L(e.time),distance:"".concat(S(e.distance)," km"),pace:L(e.pace)}});return r.a.createElement(I,{columns:a,dataSource:c,pagination:!1})},C=n(64),R=function(e){var t=e.handleUpload,n=Object(a.useState)(null),c=Object(f.a)(n,2),i=c[0],o=c[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(i)}},r.a.createElement("input",{type:"file",multiple:!0,onChange:function(e){var t=e.target;return o(Array.from(t.files))}}),r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Upload"))};function P(){var e=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: space-between;\n  margin: 0 auto;\n  max-width: 60em;\n  min-height: 3.5em;\n"]);return P=function(){return e},e}function T(){var e=Object(v.a)(["\n  background-color: #ffffff;\n  box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2);\n  margin-bottom: 1em;\n  padding: 0.2em;\n  width: 100%;\n"]);return T=function(){return e},e}var z=b.a.div(T()),B=b.a.div(P()),J=function(e){var t=e.username,n=e.handleLogout,a=e.handleUpload;return r.a.createElement(z,null,r.a.createElement(B,null,r.a.createElement(R,{handleUpload:a}),r.a.createElement("div",null,"Logged in as ",r.a.createElement("strong",null,t),"\xa0\xa0\xa0",r.a.createElement(C.a,{onClick:n},"Log out"))))},N=n(204),Y=n.n(N),H=function(e){var t=e.seriesData,n={dataLabels:{enabled:!1},plotOptions:{heatmap:{shadeIntensity:.5,colorScale:{ranges:[{from:-.01,to:.01,name:"No activities",color:"#CFD8DC"},{from:.01,to:e.highestDistance,name:"Activities",color:"#008FFB"}]}}}};return r.a.createElement(Y.a,{options:n,series:t,type:"heatmap",height:"350"})},K=function(e,t){return new Date(e,t+1,0).getDate()},W=function(){var e=[];e.length=12;for(var t=new Date,n=t.getMonth(),a=t.getFullYear(),r=11;r>=0;r--){var c=new Date(a,n,1).toLocaleString("default",{month:"short"}),i=[];i.length=K(a,n),i.fill(0),e[r]={data:i,name:c},0===n&&a--,n=(n+11)%12}return e},q=function(e){var t=e.activities,n=(new Date).getFullYear(),a=(new Date).getMonth(),c=W(),i=0;t.forEach(function(e){var t=new Date(e.date),r=t.getFullYear(),o=t.getMonth(),u=11-12*(n-r)-(a-o);if(u>=0){var l=t.getDate()-1;c[u].data[l]+=e.distance,i=Math.max(i,Math.ceil(c[u].data[l]))}});var u=c.map(function(e){return Object(o.a)({},e,{data:e.data.map(function(e){return S(e)})})});return r.a.createElement(H,{seriesData:u.reverse(),highestDistance:i})},G=n(82),Q=n(43),V=n(403);function X(){var e=Object(v.a)(["\n  margin-bottom: 1em;\n"]);return X=function(){return e},e}var Z=b.a.div(X()),$=function(e){var t=e.activityCount,n=e.totalDistance,a=e.totalTime,c=e.averageDistance,i=e.averagePace;return r.a.createElement("div",null,r.a.createElement(G.a,{gutter:16},r.a.createElement(Q.a,{span:8},r.a.createElement(V.a,{title:"Activities",value:t})),r.a.createElement(Q.a,{span:8},r.a.createElement(V.a,{title:"Distance",value:"".concat(n," km")})),r.a.createElement(Q.a,{span:8},r.a.createElement(V.a,{title:"Time",value:a}))),r.a.createElement(Z,null),r.a.createElement(G.a,{gutter:16},r.a.createElement(Q.a,{span:8}),r.a.createElement(Q.a,{span:8},r.a.createElement(V.a,{title:"Average Distance",value:"".concat(c," km")})),r.a.createElement(Q.a,{span:8},r.a.createElement(V.a,{title:"Average Pace",value:i}))))},_=function(e){var t=e.activities,n=t.length,a=0,c=0;t.forEach(function(e){a+=e.distance,c+=e.time});var i=a/n,o=Math.round(c/a);return r.a.createElement($,{activityCount:n,totalDistance:S(a),totalTime:L(c),averageDistance:S(i),averagePace:L(o)})},ee=n(405);function te(){var e=Object(v.a)(["\n  margin-bottom: 1em;\n"]);return te=function(){return e},e}var ne=Object(b.a)(ee.a)(te()),ae=function(e,t){return r.a.createElement(ne,{title:e,bordered:!1},t)};function re(){var e=Object(v.a)(["\n  margin: 0 auto;\n  max-width: 60em;\n"]);return re=function(){return e},e}function ce(){var e=Object(v.a)(["\n  background-color: #F5F5FA;\n  min-height: 100vh;\n  padding-bottom: 1em;\n  width: 100%;\n"]);return ce=function(){return e},e}var ie=h.a.TabPane,oe=b.a.div(ce()),ue=b.a.div(re()),le=function(e){var t=e.user,n=e.userData,a=e.handleLogout,c=e.handleUpload,i=e.handleDelete;return r.a.createElement(oe,null,r.a.createElement(J,{username:t.username,handleLogout:a,handleUpload:c}),r.a.createElement(ue,null,n?0===n.activities.length?r.a.createElement(g.a,null):r.a.createElement(h.a,{defaultActiveKey:"1"},r.a.createElement(ie,{tab:"Dashboard",key:"1"},ae("Total Stats",r.a.createElement(_,{activities:n.activities})),ae("Past 12 Months",r.a.createElement(q,{activities:n.activities})),ae("Heatmap",r.a.createElement(y,{activities:n.activities}))),r.a.createElement(ie,{tab:"Activities",key:"2"},r.a.createElement(M,{activities:n.activities,handleDelete:i}))):r.a.createElement("div",null,"Loading activities.")))};function se(){var e=Object(v.a)(["\n  color: #0083f7;\n  font-size: 3em;\n  font-weight: bold;\n"]);return se=function(){return e},e}var fe=b.a.h1(se()),de=function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Welcome to"),r.a.createElement(fe,null,"Data Runner"),r.a.createElement("p",null,"Upload your activity files to get interesting stats, heatmaps, and more!"),r.a.createElement("p",null,"Sign in or register to get started!"))},me=n(402),pe=n(14);function ve(){var e=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return ve=function(){return e},e}function he(){var e=Object(v.a)(["\n  margin-bottom: 1em;\n"]);return he=function(){return e},e}var ge=b.a.div(he()),be=b.a.div(ve()),Ee=function(e){var t=e.handleLogin,n=e.handleRegister,c=Object(a.useState)(""),i=Object(f.a)(c,2),o=i[0],u=i[1],l=Object(a.useState)(""),s=Object(f.a)(l,2),d=s[0],m=s[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:o,password:d})}},r.a.createElement(ge,null,r.a.createElement(me.a,{placeholder:"Username",value:o,prefix:r.a.createElement(pe.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){var t=e.target;return u(t.value)}})),r.a.createElement(ge,null,r.a.createElement(me.a.Password,{placeholder:"Password",value:d,prefix:r.a.createElement(pe.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){var t=e.target;return m(t.value)}})),r.a.createElement(be,null,r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Log in"),r.a.createElement(C.a,{onClick:function(e){e.preventDefault(),n({username:o,password:d})}},"Register")))},we=n(207),xe=n.n(we);function Oe(){var e=Object(v.a)(["\n  width: 40%;\n"]);return Oe=function(){return e},e}function je(){var e=Object(v.a)(["\n  background-image: url(",");\n  background-position: center center;\n  background-size: cover;\n  width: 60%;\n"]);return je=function(){return e},e}function ye(){var e=Object(v.a)(["\n  align-items: center;\n  display: flex;\n  float: left;\n  height: 100vh;\n  justify-content: center;\n  @media (max-width: 768px) {\n    width: 100%;\n    height: 400px;\n  }\n"]);return ye=function(){return e},e}function De(){var e=Object(v.a)(['\n  &:after {\n    content: "";\n    display: table;\n    clear: both;\n  }\n']);return De=function(){return e},e}var ke=b.a.div(De()),Se=b.a.div(ye()),Le=Object(b.a)(Se)(je(),xe.a),Ue=Object(b.a)(Se)(Oe()),Ae=function(e){var t=e.handleLogin,n=e.handleRegister;return r.a.createElement(ke,null,r.a.createElement(Le,null,r.a.createElement(de,null)),r.a.createElement(Ue,null,r.a.createElement(Ee,{handleLogin:t,handleRegister:n})))},Fe=n(199);function Ie(){var e=Object(v.a)(["\n  position: fixed;\n  top: 6.5em;\n  left: 2em;\n"]);return Ie=function(){return e},e}var Me=Object(b.a)(Fe.a)(Ie()),Ce=function(){return r.a.createElement(Me,null)},Re=n(115),Pe=function(e){var t=e.render,n=e.user,a=Object(Re.a)(e,["render","user"]);return r.a.createElement(m.b,Object.assign({},a,{render:n?t:function(){return r.a.createElement(m.a,{to:"/"})}}))},Te=function(e){var t=e.render,n=e.user,a=Object(Re.a)(e,["render","user"]);return r.a.createElement(m.b,Object.assign({},a,{render:n?function(){return r.a.createElement(m.a,{to:"/user"})}:t}))},ze=n(40),Be=n.n(ze),Je={deleteActivity:function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.a.delete("".concat("/api/activities","/").concat(t));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Error(e.t0.response.data.error);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),upload:function(){var e=Object(s.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,t.forEach(function(e){n.append("file",e)}),e.prev=2,e.next=5,Be.a.post("".concat("/api/activities","/upload"),n);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),Error(e.t0.response.data.error);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},Ne={login:function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0.response.data.error);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.a.post("/api/register",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0.response.data.error);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Ye={getUserData:function(){var e=Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.a.get("/api/user");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0.response.data.error);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},He=function(){delete Be.a.defaults.headers.common.Authorization},Ke=function(e){Be.a.defaults.headers.common.Authorization="bearer ".concat(e)},We=function(){var e=window.localStorage.getItem("dataRunnerLoggedInUser");return e?JSON.parse(e):null},qe=function(){window.localStorage.removeItem("dataRunnerLoggedInUser")},Ge=function(e){window.localStorage.setItem("dataRunnerLoggedInUser",JSON.stringify(e))},Qe=function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),u=Object(f.a)(i,2),v=u[0],h=u[1],g=Object(a.useState)(!1),b=Object(f.a)(g,2),E=b[0],w=b[1];Object(a.useEffect)(function(){var e=We();e&&x(e)},[]);var x=function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),Ke(t.token),w(!0),e.prev=3,e.next=6,Ye.getUserData();case 6:n=e.sent,h(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),p.a.error(e.t0.message);case 13:w(!1);case 14:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,Ne.login(t);case 4:return n=e.sent,Ge(n),e.next=8,x(n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p.a.error(e.t0.message);case 13:w(!1);case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),j=function(){qe(),He(),c(null),h(null)},y=function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,Ne.register(t);case 4:return n=e.sent,Ge(n),e.next=8,x(n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p.a.error(e.t0.message);case 13:w(!1);case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),e.prev=1,t&&t.length){e.next=4;break}throw Error("please select files before uploading");case 4:return e.next=6,Je.upload(t);case 6:n=e.sent,p.a.success("Upload successful"),h(Object(o.a)({},v,{activities:v.activities.concat(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),p.a.error(e.t0.message);case 14:w(!1);case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,Je.deleteActivity(t);case 4:p.a.success("Delete successful"),h(Object(o.a)({},v,{activities:v.activities.filter(function(e){return e.id!==t})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.a.error(e.t0.message);case 11:w(!1);case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,null,E&&r.a.createElement(Ce,null),r.a.createElement(m.d,null,r.a.createElement(Te,{user:n,exact:!0,path:"/",render:function(){return r.a.createElement(Ae,{handleLogin:O,handleRegister:y})}}),r.a.createElement(Pe,{user:n,exact:!0,path:"/user",render:function(){return r.a.createElement(le,{user:n,userData:v,loading:E,handleLogout:j,handleUpload:D,handleDelete:k})}})))};n(399);i.a.render(r.a.createElement(Qe,null),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.cd5602fa.chunk.js.map